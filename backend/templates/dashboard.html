<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BGH - Dashboard</title>
    <link rel="stylesheet" href="/css/dashboard.css">
    <!-- El guardi√°n de autenticaci√≥n se carga primero para proteger la ruta -->
    <script src="/js/authGuard.js"></script>
</head>
<body class="dashboard-page">
    <div class="dashboard-container">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar-top">
                <div class="user-profile">
                    <div class="user-info">
                        <!-- ID A√ëADIDO para actualizar con JS -->
                        <span id="user-info-name">Usuario</span>
                        <!-- ID A√ëADIDO para actualizar con JS -->
                        <small id="user-info-team">Team</small>
                    </div>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <!-- IDs A√ëADIDOS y href cambiado para control con JS -->
                <a href="#" id="nav-dashboard" class="nav-item active">
                    <span class="icon">üìä</span> Dashboard
                </a>
                <a href="#" id="nav-detection" class="nav-item">
                    <span class="icon">üé•</span> Detecci√≥n
                </a>
                <a href="#" id="nav-reportes" class="nav-item">
                    <span class="icon">üìã</span> Reportes
                </a>
                <a href="#" id="nav-config" class="nav-item">
                    <span class="icon">‚öôÔ∏è</span> Configuraci√≥n
                </a>
            </nav>
            
            <div class="sidebar-bottom">
                <!-- El ID ya estaba correcto -->
                <button id="logoutBtn" class="btn-logout">
                    <span class="icon">üö™</span> Cerrar Sesi√≥n
                </button>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="main-content">
            <!-- HEADER -->
            <header class="dashboard-header">
                <h1>Control de calidad ‚Äì Tornillos Philips (Visi√≥n IA)</h1>
                <div class="header-search">
                    <input type="text" placeholder="Search" class="search-input">
                </div>
            </header>

            <!-- CONTENT -->
            <div class="dashboard-content">
                <!-- TOP CARDS -->
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-label">Equipos Inspeccionados</div>
                        <!-- ID A√ëADIDO para actualizar con JS -->
                        <div class="card-value" id="kpi-inspeccionados">0</div>
                    </div>
                    <div class="card">
                        <div class="card-label">Equipos PASS</div>
                        <!-- ID A√ëADIDO para actualizar con JS -->
                        <div class="card-value success" id="kpi-pass">0</div>
                    </div>
                    <div class="card">
                        <div class="card-label">Equipos FAIL</div>
                        <!-- ID A√ëADIDO para actualizar con JS -->
                        <div class="card-value error" id="kpi-fail">0</div>
                    </div>
                    <div class="card">
                        <div class="card-label">Latencia Promedio</div>
                        <!-- ID A√ëADIDO para actualizar con JS -->
                        <div class="card-value" id="kpi-latencia">0.00 s</div>
                    </div>
                </div>

                <!-- CHARTS SECTION -->
                <div class="charts-section">
                    <!-- CHART 1 -->
                    <div class="chart-container">
                        <h3>Detecciones por Quarter</h3>
                        <!-- El ID del canvas ya estaba correcto -->
                        <canvas id="quarterChart"></canvas>
                    </div>

                    <!-- RIGHT SIDEBAR (estos valores son est√°ticos por ahora) -->
                    <div class="right-sidebar">
                        <div class="info-box">
                            <label>Latencia Promedio</label>
                            <span class="info-value">0,87 s</span>
                        </div>
                        <div class="info-box">
                            <label>Estado de C√°maras</label>
                            <span class="info-value success">Conexi√≥n OK</span>
                        </div>
                        <div class="info-box">
                            <label>Up time</label>
                            <span class="info-value">99,3 %</span>
                        </div>
                    </div>
                </div>

                <!-- LOGO -->
                <div class="dashboard-logo">
                    <img src="/assets/logo.png" alt="BGH Logo" style="max-width: 200px;">
                </div>

                <!-- BOTTOM CHARTS -->
                <div class="bottom-charts">
                    <div class="small-chart">
                        <h4>Distribuci√≥n de Detecciones</h4>
                        <!-- El ID del canvas ya estaba correcto -->
                        <canvas id="distributionChart"></canvas>
                    </div>
                    <div class="small-chart">
                        <h4>Tendencia Mensual</h4>
                        <!-- El ID del canvas ya estaba correcto -->
                        <canvas id="trendChart"></canvas>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- SCRIPTS CARGADOS AL FINAL EN ORDEN CORRECTO -->
    <script src="/js/api.js"></script>
    <script src="/js/dashboard.js"></script>
    <script src="/js/navigation.js"></script>
</body>
</html>